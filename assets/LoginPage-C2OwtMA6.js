import{r as t,j as s,P as f,T as h,B as y,C as j,f as v,l as w}from"./index-C1ReEk1L.js";import{C,A as S}from"./Container-BioeMoiY.js";import{T as d}from"./TextField-CMjqTiYG.js";import{B as b}from"./Button-vGjmJ2yn.js";import"./Select-CFSLaOO0.js";const A=({onLoginSuccess:c})=>{const[n,p]=t.useState(""),[o,g]=t.useState(""),[i,l]=t.useState(!1),[m,r]=t.useState(null),x=async a=>{a.preventDefault(),l(!0),r(null);try{await v();const e=await w(n,o);if(e.success&&e.userId&&e.employeeId&&e.employeeName)c(e.userId,e.employeeId,e.employeeName);else{const u=typeof e.message=="string"?e.message:"";r(u==="Invalid login credentials."?"Invalid username or password.":u||"Login failed")}}catch(e){e instanceof Error?r(e.message||"An unexpected error occurred. Please try again."):r("An unexpected error occurred. Please try again.")}finally{l(!1)}};return s.jsx(C,{component:"main",maxWidth:"xs",children:s.jsxs(f,{elevation:3,sx:{marginTop:8,padding:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("img",{src:"/logo-siumang@0.33x.svg",alt:"Siumang Logo",style:{width:"100px",marginBottom:"16px"}}),s.jsx(h,{component:"h1",variant:"h5",sx:{marginBottom:2},children:"Sales Monitor Login"}),s.jsxs(y,{component:"form",noValidate:!0,onSubmit:x,sx:{mt:1},children:[s.jsx(d,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:n,onChange:a=>p(a.target.value)}),s.jsx(d,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:a=>g(a.target.value)}),s.jsx(b,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:i?s.jsx(j,{size:24,color:"inherit"}):"Sign In"}),m&&s.jsx(S,{severity:"error",sx:{width:"100%",mt:2},children:m})]})]})})};export{A as default};
