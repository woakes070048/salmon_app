import{e as D,m as T,h as v,r as a,j as e,B as u,C as S,T as w,P as I,n as k}from"./index-BStpc4DZ.js";import{A as P}from"./Alert-NFvkCvVw.js";import{C as A}from"./Container-XVaRKa_4.js";import{T as x}from"./TextField-BeyMXkEa.js";import{T as E,a as F,b as H,c as f,d as s,e as W}from"./TableRow-C7_fMm-k.js";const G=()=>{const{employeeId:l}=D(),{customer:g}=T();v();const[d,y]=a.useState([]),[C,n]=a.useState(!0),[m,i]=a.useState(null),[o,j]=a.useState(""),[c,p]=a.useState(""),[h,b]=a.useState(g||"");return a.useEffect(()=>{if(l){const t=new Date,r=new Date(t.setDate(t.getDate()-7));j(r.toISOString().split("T")[0]),p(new Date().toISOString().split("T")[0])}},[l]),a.useEffect(()=>{(async()=>{if(!l){i("Employee ID not available."),n(!1);return}n(!0),i(null);try{const r=await k(o,c,h);y(r)}catch(r){i(r.message||"Failed to fetch sales activity history.")}finally{n(!1)}})()},[l,o,c,h]),C?e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(S,{})}):m?e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(P,{severity:"error",children:m})}):e.jsxs(A,{maxWidth:"md",sx:{mt:4},children:[e.jsxs(u,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(x,{label:"From Date",type:"date",value:o,onChange:t=>j(t.target.value),InputLabelProps:{shrink:!0}}),e.jsx(x,{label:"To Date",type:"date",value:c,onChange:t=>p(t.target.value),InputLabelProps:{shrink:!0}}),e.jsx(x,{label:"Customer",value:h,onChange:t=>b(t.target.value),sx:{flexGrow:1}})]}),d.length===0?e.jsx(w,{variant:"subtitle1",sx:{textAlign:"center",mt:4},children:"No activities found for the selected criteria."}):e.jsx(E,{component:I,children:e.jsxs(F,{sx:{minWidth:650},"aria-label":"sales activity table",children:[e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Customer"}),e.jsx(s,{children:"Check-in"}),e.jsx(s,{children:"Check-out"}),e.jsx(s,{children:"Duration (min)"}),e.jsx(s,{children:"Status"})]})}),e.jsx(W,{children:d.map((t,r)=>e.jsxs(f,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(s,{component:"th",scope:"row",children:t.Date}),e.jsx(s,{children:t.Customer}),e.jsx(s,{children:t.Checkin}),e.jsx(s,{children:t.Checkout}),e.jsx(s,{children:t.Duration}),e.jsx(s,{children:t.Status})]},r))})]})})]})};export{G as default};
