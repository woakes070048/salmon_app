import{G as v,r,j as e,B as h,C as D,T as f,P as T,O as S}from"./index-CrghFRdq.js";import{A as w,C as I}from"./Container-B91d9uGY.js";import{T as x}from"./TextField-OZyE5Q49.js";import{T as A,a as F,b as k,c as g,d as s,e as E}from"./TableRow-NTIavE6D.js";import"./Grow-wq8xQCCO.js";const L=()=>{const{employeeId:u}=v(),[d,y]=r.useState([]),[C,n]=r.useState(!0),[m,l]=r.useState(null),[i,p]=r.useState(""),[o,j]=r.useState(""),[c,b]=r.useState("");return r.useEffect(()=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()-1,t.getDate());p(a.toISOString().split("T")[0]),j(new Date().toISOString().split("T")[0])},[]),r.useEffect(()=>{(async()=>{if(!u){l("Employee ID not available."),n(!1);return}n(!0),l(null);try{const a=await S(i,o,c);y(a)}catch(a){l(a.message||"Failed to fetch sales activity history.")}finally{n(!1)}})()},[u,i,o,c]),C?e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(D,{})}):m?e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(w,{severity:"error",children:m})}):e.jsxs(I,{maxWidth:"lg",sx:{mt:2},children:[e.jsx(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"Activity Report"}),e.jsxs(h,{sx:{mb:1,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(x,{label:"From Date",type:"date",value:i,onChange:t=>p(t.target.value),InputLabelProps:{shrink:!0}}),e.jsx(x,{label:"To Date",type:"date",value:o,onChange:t=>j(t.target.value),InputLabelProps:{shrink:!0}}),e.jsx(x,{label:"Customer",value:c,onChange:t=>b(t.target.value),sx:{flexGrow:1}})]}),d.length===0?e.jsx(f,{variant:"subtitle1",sx:{textAlign:"center",mt:4},children:"No activities found for the selected criteria."}):e.jsx(A,{component:T,children:e.jsxs(F,{sx:{minWidth:650},"aria-label":"sales activity table",children:[e.jsx(k,{children:e.jsxs(g,{children:[e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Customer"}),e.jsx(s,{children:"Check-in"}),e.jsx(s,{children:"Check-out"}),e.jsx(s,{children:"Duration (min)"}),e.jsx(s,{children:"Status"})]})}),e.jsx(E,{children:d.map((t,a)=>e.jsxs(g,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(s,{component:"th",scope:"row",children:t.Date}),e.jsx(s,{children:t.Customer}),e.jsx(s,{children:t.Checkin}),e.jsx(s,{children:t.Checkout}),e.jsx(s,{children:t.Duration}),e.jsx(s,{children:t.Status})]},a))})]})})]})};export{L as default};
