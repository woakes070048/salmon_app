import{G as D,r,j as e,B as h,C as S,T as f,P as T,M as v}from"./index-CWhdFwn0.js";import{A as w}from"./Alert-s7-zJ73f.js";import{C as I}from"./Container-CkPRGcvw.js";import{T as x}from"./TextField-CRfST_tx.js";import{T as k,a as A,b as F,c as g,d as s,e as E}from"./TableRow-BM_4dWqS.js";import"./Grow-CiZRokau.js";const G=()=>{const{employeeId:u}=D(),[d,y]=r.useState([]),[C,n]=r.useState(!0),[m,l]=r.useState(null),[o,j]=r.useState(""),[i,p]=r.useState(""),[c,b]=r.useState("");return r.useEffect(()=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()-1,t.getDate());j(a.toISOString().split("T")[0]),p(new Date().toISOString().split("T")[0])},[]),r.useEffect(()=>{(async()=>{if(!u){l("Employee ID not available."),n(!1);return}n(!0),l(null);try{const a=await v(o,i,c);y(a)}catch(a){l(a.message||"Failed to fetch sales activity history.")}finally{n(!1)}})()},[u,o,i,c]),C?e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(S,{})}):m?e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(w,{severity:"error",children:m})}):e.jsxs(I,{maxWidth:"lg",sx:{mt:2},children:[e.jsx(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"Sales Activity History"}),e.jsxs(h,{sx:{mb:1,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(x,{label:"From Date",type:"date",value:o,onChange:t=>j(t.target.value),InputLabelProps:{shrink:!0}}),e.jsx(x,{label:"To Date",type:"date",value:i,onChange:t=>p(t.target.value),InputLabelProps:{shrink:!0}}),e.jsx(x,{label:"Customer",value:c,onChange:t=>b(t.target.value),sx:{flexGrow:1}})]}),d.length===0?e.jsx(f,{variant:"subtitle1",sx:{textAlign:"center",mt:4},children:"No activities found for the selected criteria."}):e.jsx(k,{component:T,children:e.jsxs(A,{sx:{minWidth:650},"aria-label":"sales activity table",children:[e.jsx(F,{children:e.jsxs(g,{children:[e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Customer"}),e.jsx(s,{children:"Check-in"}),e.jsx(s,{children:"Check-out"}),e.jsx(s,{children:"Duration (min)"}),e.jsx(s,{children:"Status"})]})}),e.jsx(E,{children:d.map(t=>e.jsxs(g,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(s,{component:"th",scope:"row",children:t.Date}),e.jsx(s,{children:t.Customer}),e.jsx(s,{children:t.Checkin}),e.jsx(s,{children:t.Checkout}),e.jsx(s,{children:t.Duration}),e.jsx(s,{children:t.Status})]},`${t.Date}-${t.Checkin}`))})]})})]})};export{G as default};
