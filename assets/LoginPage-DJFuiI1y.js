import{r as t,j as e,P as f,T as h,B as j,C as v,f as w,l as y}from"./index-CrghFRdq.js";import{C,A as b}from"./Container-B91d9uGY.js";import{T as d}from"./TextField-OZyE5Q49.js";import{B as S}from"./Button-DAbXaOUf.js";import"./Grow-wq8xQCCO.js";const W=({onLoginSuccess:c})=>{const[n,p]=t.useState(""),[o,g]=t.useState(""),[i,l]=t.useState(!1),[u,r]=t.useState(null),x=async a=>{a.preventDefault(),l(!0),r(null);try{await w();const s=await y(n,o);if(s.success&&s.userId&&s.salesName)c(s.userId,s.salesName);else{const m=typeof s.message=="string"?s.message:"";r(m==="Invalid login credentials."?"Invalid username or password.":m||"Login failed")}}catch{r("An unexpected error occurred. Please try again.")}finally{l(!1)}};return e.jsx(C,{component:"main",maxWidth:"xs",children:e.jsxs(f,{elevation:3,sx:{marginTop:8,padding:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(h,{component:"h1",variant:"h5",sx:{marginBottom:2},children:"Sales Monitor Login"}),e.jsxs(j,{component:"form",noValidate:!0,onSubmit:x,sx:{mt:1},children:[e.jsx(d,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:n,onChange:a=>p(a.target.value)}),e.jsx(d,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:a=>g(a.target.value)}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:i?e.jsx(v,{size:24,color:"inherit"}):"Sign In"}),u&&e.jsx(b,{severity:"error",sx:{width:"100%",mt:2},children:u})]})]})})};export{W as default};
